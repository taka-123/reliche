# Code Rabbit セットアップガイド

## 概要

Code Rabbit は AI を活用したコードレビューツールです。GitHub と統合することで、プルリクエストに対して自動的にコードレビューを実行し、品質向上を支援します。

## 基本設定

### 1. アカウント作成
1. https://www.coderabbit.ai/ja にアクセス
2. **GitHubでサインアップ** をクリック
3. GitHub アカウントで認証

### 2. リポジトリ連携
1. Code Rabbit ダッシュボードでリポジトリを選択
2. 連携を承認

## VS Code 拡張機能のインストール（推奨・完全無料）

**VS Code拡張機能は完全無料**で利用できます！

### インストール手順

1. **VS Code を開く**
2. **拡張機能タブを開く** (Ctrl+Shift+X / Cmd+Shift+X)
3. **"CodeRabbit" で検索**
4. **"CodeRabbit" 拡張機能をインストール**
5. **Code Rabbitにログイン** (アカウント連携)

### 拡張機能の特徴

- **完全無料**: プライベートリポジトリでも制限なし
- **ローカル完結**: ローカルでのレビューのためセキュリティ面も安心
- **即座にレビュー**: コミット時に2-3分でレビュー完了
- **対話的**: 指摘に対して質問や修正依頼が可能
- **複数エディタ対応**: VS Code、Cursor、Windsurf等で利用可能

### 使用方法

1. **コードを編集してコミット**
2. **レビュー確認ダイアログで「Yes」を選択**
3. **2-3分待機でレビュー結果表示**
4. **指摘事項を確認**:
   - `Approve`: 修正を自動適用
   - `Reject`: 指摘を無視
   - カスタム対応: GitHub Copilot等に内容を転送

## 基本的な使用方法

### プルリクエストでの自動レビュー

1. **通常通りPRを作成**: ブランチを作成してプルリクエストを作成
2. **自動レビュー実行**: Code Rabbit が自動的にコードをレビュー
3. **レビューコメント確認**: PR のコメント欄に詳細なフィードバックが表示
4. **対話的改善**: 自然言語でCode Rabbit と対話して改善案を議論

### ローカルでのレビュー（VS Code拡張使用時）

1. **コード編集**: VS Code でコードを編集
2. **リアルタイムフィードバック**: 編集中に潜在的な問題を指摘
3. **改善提案**: 具体的な修正案を提示

## Code Rabbit の特徴

### 学習機能
- **チーム設定の学習**: 使用するにつれてチームのコーディング規約を学習
- **カスタマイズ**: プロジェクト固有のベストプラクティスに適応

### セキュリティ
- **プライバシー保護**: コードは解析後に保持されない
- **SOC 2、GDPR準拠**: 企業レベルのセキュリティ基準

### 多言語対応
- **PHP (Laravel)**: バックエンドコードの詳細分析
- **TypeScript/JavaScript (Nuxt/Vue)**: フロントエンドコードの型安全性チェック
- **その他**: 多数のプログラミング言語をサポート

## 期待される効果

1. **レビュー工数削減**: 機械的なチェックを自動化
2. **品質向上**: 見落としがちな問題を検出
3. **学習促進**: ベストプラクティスの提案によるスキル向上
4. **一貫性**: チーム全体でのコーディング標準統一

## トラブルシューティング

### よくある問題

**Q: レビューが実行されない**
A: リポジトリの連携設定を確認してください。必要に応じて Code Rabbit の設定画面で再連携してください。

**Q: 特定のファイルをレビュー対象外にしたい**
A: `.coderabbit.yaml` 設定ファイルでレビュー対象を制御できます。

**Q: VS Code 拡張が動作しない**
A: Code Rabbit アカウントでログインしているか確認してください。

## 日本語レビューの設定

Code Rabbit は日本語でのレビューが可能です。以下の設定を行ってください：

### 1. 設定ファイルの作成

プロジェクトルートに `.coderabbit.yaml` ファイルを作成してください：

**注意**: このテンプレートでは `.coderabbit.yaml` は `.gitignore` に含まれています。各プロジェクトで個別に作成してください。

```yaml
# yaml-language-server: $schema=https://coderabbit.ai/integrations/schema.v2.json
language: ja-JP
early_access: false

tone_instructions: |
  このプロジェクトは Laravel + Nuxt.js の構成です。
  以下の観点を重視してレビューしてください：
  
  【バックエンド（Laravel）】
  - PSR-12 コーディング規約の準拠
  - セキュリティ（SQLインジェクション、XSS、CSRF等）
  - Eloquent ORM の適切な使用
  
  【フロントエンド（Nuxt/Vue）】
  - Vue 3 Composition API の適切な使用
  - TypeScript の型安全性
  - パフォーマンス最適化

knowledge_base:
  learnings:
    scope: auto

reviews:
  profile: chill
  request_changes_workflow: false
  high_level_summary: true
  review_status: true
  path_filters:
    - "backend/**/*.php"
    - "frontend/**/*.{ts,js,vue}"
    - "!**/node_modules/**"
    - "!**/vendor/**"
```

### 2. GitHub リポジトリでの設定

**GitHub側では特別な設定は不要**です：
- Code Rabbit がリポジトリに自動連携済み
- プルリクエスト作成時に自動でレビューが開始
- 設定ファイルがあれば自動的に日本語でレビュー実行

### 3. レビュー頻度について

**重要**: Code Rabbitには実際にレビュー頻度の制限があります：

- **レート制限**: 1時間あたりのレビュー回数に制限あり
- **制限後の待機時間**: 制限到達後は約30分〜1時間の待機が必要
- **制限リセット**: 時間単位でリセットされる
- **対策**: 完成後にレビューを依頼する方が効率的

### レビュー頻度の最適化

**推奨する使い方**：
1. **コード完成後にレビュー**: 編集途中での連続レビューを避ける
2. **PR作成時の自動レビュー**: 最も効果的なタイミング
3. **VS Code拡張**: ローカルレビューでは制限が緩い
4. **手動トリガー**: 必要時のみレビューを実行

**制限を避けるコツ**：
- 小さな変更での頻繁なレビューを控える
- まとめて変更してからレビューを依頼
- VS Code拡張を活用してローカルでプレビュー

### UI設定での日本語化

Code Rabbit ダッシュボードからも日本語設定が可能です：

1. https://app.coderabbit.ai/ にログイン
2. 対象リポジトリの **「Configure」** をクリック
3. **Language**: `Japanese` に変更
4. **Review Instructions**: 日本語でカスタム指示を追加
5. **Save Settings** で保存

**設定の優先順位**: `.coderabbit.yaml` > リポジトリUI設定 > 組織設定

## 参考リンク

- [Code Rabbit 公式サイト](https://www.coderabbit.ai/ja)
- [ドキュメント](https://docs.coderabbit.ai)
- [VS Code 拡張機能](https://marketplace.visualstudio.com/search?term=coderabbit&target=VSCode)